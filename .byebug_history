exit
session[:customer]
subscription
session[:subscription]
subscription[:plan][:product]
subscription = Stripe::Subscription.retrieve("sub_1SDRBmGsrou80PAesFeXCWVF")
session[:currency]
session
session[:metadata]
exit
session[:metadata]
session
event
session[:product]
event['data']
session
exit
payment_link = Stripe::PaymentLink.create({
      line_items: [
        {
          price: monthly_price_id,
          quantity: 1,
        },
        {
          price: yearly_price_id,
          quantity: 1,
        },
      ],
    })
yearly_price_id = Rails.env == 'development' ? 'price_1SDPicGsrou80PAevahnimFd' : 'price_1SDLcVGsrou80PAeuo38KdOn'
monthly_price_id = Rails.env == 'development' ? 'price_1SDPicGsrou80PAeOYz8kSVl' : 'price_1Rsx1ZGsrou80PAeA2cDc3fv'
Stripe.api_key
exit
render json: { user: current_user, paymentStatus: current_user.paid?, proposalCount: current_user.proposals_this_month.count }
current_user.paid?
current_user.proposals_this_month
current_user.proposals_this_month.count
exit
user_params.except(:password, :password_confirmation)
user_params.except(:password)
params[:user][:password]
params[:password]
params
new
new = user_params.delete(:password)
user_params[:password]
user_params.delete(:password)
user_params[:password].blank?
user_params[:password]
params
exit
request.headers
request.headers['Authorization']&.split(' ')&.last
exit
user.save!
user.save
user = User.new(user_params)
user.save
User.new(user_params)
user_params
exit
session[:product]
session
exit
params
session
exit
session
exit
session[:plan][:product] == "prod_Sobj1tewng9TXF"
session[:plan][:product]
session[:plan]
session
exit
session.keys
session[:product]
session[:plan][:product]
session[:plan]
session
exit
params[:data][:object][:description]
params[:data][:object][:object]
params[:data][:object].keys
params[:data][:object]
params[:data].keys
params[:data]
params
payload
session
params[:event]
params[:object][:event]
params[:object]
params.keys
params[:line_items]
session['lines']
session['lines']['data']
session
session['line_items']
session['line_items']['data']
session
session.keys
params[:data][:object].keys
params[:data][:object]
params[:data]
params[:data].keys
params[:object]
params[:created]
params[:livemode]
params
params[:data]
params[:request]
params[:controller]
params[:type]
params[:action]
params.keys
params[:payment]
params[:object]
params.keys
params[:pricing]
session
params
payload
session
exit
session['id']
session
exit
session['customer']
session
exit
